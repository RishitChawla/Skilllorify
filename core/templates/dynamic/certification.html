{% extends "layout.html" %}

{% block title %}{{ course.name }} - Details{% endblock %}

{% block meta %}
    <!-- Basic Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Skilllorify Eduventure is an online certification platform where you can test your skills, take professional assessments, and earn recognized certifications.">
    <meta name="keywords" content="Skilllorify, certification, online test, skills assessment, online learning, exams, e-learning, education, professional certification">
    <meta name="author" content="Skilllorify Eduventure">
    <meta name="theme-color" content="#1e3c72">

    <!-- Open Graph / Facebook / LinkedIn -->
    <meta property="og:title" content="Skilllorify Eduventure - {{ course.name }}">
    <meta property="og:description" content="Browse through the {{course.name}} certification provided by Skilllorify Eduventure and take the test to test your skills">
    <meta property="og:image" content="https://www.skilllorify.com/static/images/og-image.png">
    <meta property="og:url" content="https://www.skilllorify.com/">
    <meta property="og:type" content="website">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Skilllorify Eduventure - Browse Certifications">
    <meta name="twitter:description" content="Browse through the {{course.name}} certification provided by Skilllorify Eduventure and take the test to test your skills">
    <meta name="twitter:image" content="https://www.skilllorify.com/static/images/og-image.png">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.skilllorify.com/">
{% endblock %}

{% block content %}
<section class="cta" style="text-align: left;">
    <div class="container">
        <div class="d-flex flex-wrap justify-content-between">
            <div class="course-header-content" style="flex: 1 1 600px;">
                <h1 class="animate-slide-up" style="color: rgb(248, 248, 205);">{{ course.name }}</h1>
                <p class="animate-slide-up delay-100" style="font-size: 1.25rem;" class="animate-slide-up delay-100">{{ course.bio }}</p>
                
                <div class="course-stats animate-slide-up delay-200">
                    <div class="course-stat">
                        <div class="course-stat-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                        </div>
                        {% if course.duration %}
                            <span>{{ course.duration }}</span>
                        {% endif %}
                    </div>
                    
                    
                    
                    <!-- <div class="course-stat">
                        <div class="course-stat-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                        </div>
                        <span>5,280 Students</span>
                    </div> -->
                    
                    <div class="course-stat">
                        <div class="course-stat-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                            </svg>
                        </div>
                        <span>{{ course.rating }}</span>
                    </div>
                    
                    <div class="course-stat">
                        <div class="course-stat-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 20h9"></path>
                                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                            </svg>
                        </div>
                        <span>Created: {{ course.createdAt.date }}</span>
                    </div>
                </div>
            </div>
            
            <div class="course-header-cta animate-slide-up delay-300 mt-8" style="flex: 0 0 280px;">
                <div class="card p-4" style="background-color: var(--gray-light);">
                    <div class="course-price">
                        <div class="d-flex align-items-center">
                            {% if course.discountedPrice %}
                                {% if course.discountedPrice == 0 %}
                                    <span class="text-primary" id="discountedPrice" style="font-size: 2rem; font-weight: 700;">FREE</span>
                                {% else %}
                                    <span class="text-primary" id="discountedPrice" style="font-size: 2rem; font-weight: 700;">{{ course.discountedPrice }}</span>
                                {% endif %}
                                <span class="text-gray ml-2" id="actualPrice" style="text-decoration: line-through;">{{ course.price }}</span> 
                                <span id="percentageCal" class="badge badge-success ml-2">33% off</span>
                                
                            {% else %}
                                {% if course.price == 0 %}
                                    <span class="text-primary" style="font-size: 2rem; font-weight: 700;">FREE</span>
                                {% else %}
                                    <span class="text-primary" style="font-size: 2rem; font-weight: 700;">₹ {{ course.price }}</span>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="course-actions">
                        <form method="post" action="{% url 'certification' course.slug  %}">
                            {% csrf_token %}
                            <button name="enrollBtn" type="submit" class="btn btn-primary w-100">Enroll Now</button>
                        </form>
                    </div>
                    
                    
                </div>
            </div>
        </div>
    </div>
</section>


{% if reviews %}
    <section class="testimonials py-16 bg-light">
        <div class="container" style="display: flex;">
            <div class="reviews-header animate-on-scroll">
                <h2 class="mb-2" style="color: var(--navyBlue);">Student Reviews</h2>
                <p class="text-gray">See what our students have to say about this course</p>
            </div>
            
        </div>
        </div>
            
            
            <div class="d-flex flex-wrap justify-content-between gap-5">
                {% for review in reviews %}
                    <div class="testimonial-card card p-6 animate-on-scroll" style="flex: 1 1 300px;">
                        <div class="testimonial-avatar mb-4 text-center">
                            <img src="{{ review.pfp.url }}" alt="Review-Avatar-3" class="rounded-full" style="width: 80px; height: 80px; object-fit: cover;">
                        </div>
                        <p class="testimonial-text mb-4">{{ review.review }}</p>
                        <div class="testimonial-author text-center">
                            <h4 class="mb-1">{{ review.name }}</h4>
                            <div class="text-gray">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="0" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                </svg>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endif %}


<section class="related-courses py-10 bg-light">
    <div class="container">
        <h2 class="mb-6 animate-on-scroll" style="color: var(--navyBlue);">More Courses</h2>
        
        <div class="certification-grid">
            {% for curd in more %}
                {% include "core/card.html" %}
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Smooth scrolling for navigation links
        const navLinks = document.querySelectorAll('.course-nav-link');
        
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links
                navLinks.forEach(link => link.classList.remove('active'));
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Get the target section
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                
                // Scroll to target section
                window.scrollTo({
                    top: targetSection.offsetTop - 100,
                    behavior: 'smooth'
                });
            });
        });
        
        // Module accordion functionality
        const moduleHeaders = document.querySelectorAll('.module-header');
        
        moduleHeaders.forEach(header => {
            header.addEventListener('click', function() {
                const moduleContent = this.nextElementSibling;
                
                if (moduleContent.style.display === 'none' || !moduleContent.style.display) {
                    moduleContent.style.display = 'block';
                    this.classList.add('active');
                } else {
                    moduleContent.style.display = 'none';
                    this.classList.remove('active');
                }
            });
        });
        
        // FAQ accordion functionality
        const faqQuestions = document.querySelectorAll('.faq-question');
        
        faqQuestions.forEach(question => {
            question.addEventListener('click', function() {
                const answer = this.nextElementSibling;
                
                // Close all other answers
                document.querySelectorAll('.faq-answer.active').forEach(item => {
                    if (item !== answer) {
                        item.classList.remove('active');
                    }
                });
                
                // Toggle current answer
                answer.classList.toggle('active');
            });
        });
        
        // Highlight active section in navigation based on scroll position
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section[id]');
            const scrollPosition = window.scrollY + 150; // Offset for fixed header
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    document.querySelector(`.course-nav-link[href="#${sectionId}"]`).classList.add('active');
                } else {
                    document.querySelector(`.course-nav-link[href="#${sectionId}"]`).classList.remove('active');
                }
            });
        });

        if (document.getElementById("discountedPrice")) {

            let dp = parseFloat(document.getElementById("discountedPrice").innerText);
            let ap = parseFloat(document.getElementById("actualPrice").innerText);

            if (!isNaN(dp) && !isNaN(ap) && ap !== 0) {
                let discount = Math.floor(100 - (dp / ap) * 100);
                document.getElementById("discountedPrice").innerHTML = "₹" + dp
                document.getElementById("actualPrice").innerHTML = "₹" + ap
                document.getElementById("percentageCal").innerHTML = discount + "% off";
            } else {
                document.getElementById("percentageCal").innerHTML = "Invalid price";
            }
        };
    });
</script>
{% endblock %}
